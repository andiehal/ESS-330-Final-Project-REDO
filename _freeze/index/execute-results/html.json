{
  "hash": "a25f6d646f69d549f103b4aaf5d7d590",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Final Project - Wood Thrush Response\nauthors:\n  - name: Leona Myers\n    affiliation: \n      - Colorado State University\n    roles:\n      - Writing\n      - Coding\n      - Refining\n    corresponding: true\n  - name: Andie Hall\n    affiliation: \n      - Colorado State University\n    roles:\n      - Writing\n      - Coding\n      - Refining\n      \nexecute: \n  echo: true\n  \nbibliography: references.bib\ncsl: apa.csl\n---\n\n\n\n\n\n# Climate Change and Avian Response: Assessing the Effects of CO₂ and Temperature on Wood Thrush Populations\n\n## Abstract -\n\nAs climate change continues to drive research goals, different areas of impact arise surrounding not only humans but environmental and wildlife harm. Carbon dioxide is one of the main contributors to climate change, directly impacting annual temperatures and disturbing typical weather patterns. Wildlife, specifically avian species, are queue dependent on temperatures for specific phenological stages like migration (@neelang2024). In recent decades, there has been an observed decline to several avian populations, leading both avian and climate scientists to answer if climate change has disturbed the migration periods, which can directly impact the effectiveness of their breeding cycles. By analyzing annual temperatures and carbon emissions, this study aims to identify a correlation between changing variables and observed migration dates.\n\n## Part 1. Introduction -\n\n**Problem Overview**: In recent decades, global climate change, driven by increased carbon dioxide emissions, has contributed to rising temperatures and disrupted ecological systems (@noaa2024climate). Many migratory bird species, such as the subject of this study, the Wood Thrush (Hylocichla mustelina), are particularly vulnerable to these changes due to their reliance on specific environmental cues for migration, breeding, and survival. The Wood Thrush is included on the Yellow Watch List for birds most at risk of extinction, and it is one of the most prominent examples of declining forest songbirds in North America (@cornell2024woodthrush). Populations have declined by 1.3% per year, resulting in a cumulative decline of approximately 50% between 1966 and 2019 (@cornell2024woodthrush). Declines in Wood Thrush populations have been observed across North America, yet the extent to which atmospheric CO2 levels and associated temperature changes contribute to these declines remains unclear.\n\n\n\n\n\n\n::: {#cell-fig-wood-thrush .cell layout-align=\"center\"}\n\n```{.r .cell-code .hidden}\nknitr::include_graphics(\"~/Github/ESS-330-Final-Project-REDO/images/Wood_Thrush_Photo.jpg\")\n```\n\n::: {.cell-output-display}\n![Wood Thrush - Lance Leonhardt (Audubon Vermont)](images/Wood_Thrush_Photo.jpg){#fig-wood-thrush fig-align='center'}\n:::\n:::\n\n\n\n\n\n------------------------------------------------------------------------\n\n## Part 2. Materials and Methods -\n\n### I. Research Goal and Data Sources\n\n**This research will investigate the effects of atmospheric CO₂ concentrations and temperature changes on the population dynamics of the Wood Thrush (Hylocichla mustelina)**, a migratory songbird of conservation concern. The study integrates climate and ecological data from multiple large-scale sources: temperature records from the National Weather Service, (@noaa2024climate) bird abundance and distribution data from Cornell’s eBird Dataset (@cornell2024woodthrush), and atmospheric CO₂ data from the Global Carbon Budget (@friedlingstein2023global). Using these data sources, we can create a model to help determine the effect of these variables on the arrival and departure dates of these species along the mid-northeastern coast of the United States from 1966 to 2019.\n\n### II. Methods Overview\n\n1.  **Data acquisition**\n\n    -   Climate Data: National Weather Service\n\n    -   CO₂ Data: Global Carbon Budget\n\n    -   Bird Observation Data: Cornell Lab’s eBird dataset\n\n2.  **Data Cleaning and Processing**\n\n    -   **Climate Data -** Imported 7 different datasets from the states above that recorded annual temperatures for each month between 1966 and 2019 and combined into one large dataset, “All_Weather_Data.csv”\n\n        -   **Difficulties**: The data was extremely time-consuming to clean and process into a large dataset due to the website’s pdf format for data exports. Using Excel’s data from the file helped to import the data and allowed for processing and cleaning of the data before being inserted into the rProject data directory.\n\n    -   **CO2 Data -** Downloaded from the Global Carbon Budget and then uploaded to Rstudio. No additional cleaning was needed.\n\n        -   **Difficulties**: This data set only includes annual emission while other data sets include monthly data, but was the most accessible to our report.\n\n    -   **Wood Thrush Data -** Filtered Wood Thrush eBird data to between the years of 1966 and 2019, along with filtering the location of the bird to these specific states: Pennsylvania, West Virginia, Virginia, Kentucky, Ohio, Indiana, and Tennessee. “Wood_Thrush_Raw.csv”\n\n        -   **Difficulties**: The dataset is about 131.5 MB and cannot be uploaded to the git repository, meaning data sharing had to be done via email rather than sharing the actual repo for us to pull and push. \n\n3.  **Statistical Analysis**\n\n    **Preliminary Analysis - Linear Regression Model**\n\n    -   To get a basic understand of the correlation relationship between temperature, CO2, and dates of observation, we created a linear model to visualize and create statistical information.\n\n    **Main Analysis - Machine Learning Prediction Models**\n\n    -   Using the multiple datasets to account for temperature, CO2, and observations, we created multiple machine learning models: Linear Regression, Random Forest, and XGBoost. To identify the model of best fit, we created a workflow that would allow us to collect the metrics and determine the model we should choose based on the R-squared and RMSE values.\n\n    -   Using two separate recipes to account for both the integration of temperature on observation dates, along with CO2 emissions, to ensure that they would not interfere with each other, and give us much more data to analyze. After prepping and baking the data, we created workflows to run the models. In total, we tested about 6 models, three for each recipe, and deciphered that Random Forest gives us the best predictions for both predictor variables.\n\n    -   Once models were defined with both models and fitted to the resamples of the CV fold, we ran the models to determine their statistical significance and to see if the outcome of the model would give us data that would either prove or disprove our hypothesis. We then, with these models we create visualizations to represent and understand the data much better.\n\n4.  **Visualization**\n\n    -   Creating plots for the relationship between observation date and CO2, along with a separate relationship between observation date and temperature. In total, there will be four main graphs to understand their impact on both Spring Arrival dates and Fall Departure dates.\n\n## Part 3. Preliminary Analysis - Exploring the Data\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# Library Codes used\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.4     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nlibrary(tidymodels)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n── Attaching packages ────────────────────────────────────── tidymodels 1.3.0 ──\n✔ broom        1.0.8     ✔ rsample      1.3.0\n✔ dials        1.4.0     ✔ tune         1.3.0\n✔ infer        1.0.8     ✔ workflows    1.2.0\n✔ modeldata    1.4.0     ✔ workflowsets 1.1.0\n✔ parsnip      1.3.1     ✔ yardstick    1.3.2\n✔ recipes      1.3.0     \n── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──\n✖ scales::discard() masks purrr::discard()\n✖ dplyr::filter()   masks stats::filter()\n✖ recipes::fixed()  masks stringr::fixed()\n✖ dplyr::lag()      masks stats::lag()\n✖ yardstick::spec() masks readr::spec()\n✖ recipes::step()   masks stats::step()\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nlibrary(here)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nhere() starts at /Users/andiehall/Github/ESS-330-Final-Project-REDO\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nlibrary(readr)\nlibrary(lubridate)\nlibrary(zoo)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n\nAttaching package: 'zoo'\n\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n```\n\n\n:::\n:::\n\n\n\n\n\n### I. Reading in Data Bases\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# CO2 Emissions\nAnnua_CO2_Emissions <- read_csv(\"data/annual-co2-emissions-per-country.csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 54 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (1): Entity\ndbl (2): Year, Annual CO₂ emissions\nlgl (1): Code\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\n# Temperature Data\nAllWeatherData <- read_csv(\"data/AllWeatherData.csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 378 Columns: 15\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (1): STATE\ndbl (14): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec, ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\n# Wood Thrush Data\nWood_Thrush <- read_csv(\"data/Wood_Thrush.csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nNew names:\nRows: 301512 Columns: 27\n── Column specification\n──────────────────────────────────────────────────────── Delimiter: \",\" chr\n(6): COUNTRY, COUNTRY CODE, STATE, COUNTY, OBSERVATION COUNT, OBSERVATI... dbl\n(2): LATITUDE, LONGITUDE lgl (19): ...6, ...10, ...11, ...12, ...13, ...14,\n...15, ...16, ...17, ...1...\nℹ Use `spec()` to retrieve the full column specification for this data. ℹ\nSpecify the column types or set `show_col_types = FALSE` to quiet this message.\n• `` -> `...6`\n• `` -> `...10`\n• `` -> `...11`\n• `` -> `...12`\n• `` -> `...13`\n• `` -> `...14`\n• `` -> `...15`\n• `` -> `...16`\n• `` -> `...17`\n• `` -> `...18`\n• `` -> `...19`\n• `` -> `...20`\n• `` -> `...21`\n• `` -> `...22`\n• `` -> `...23`\n• `` -> `...24`\n• `` -> `...25`\n• `` -> `...26`\n• `` -> `...27`\n```\n\n\n:::\n:::\n\n\n\n\n\n### II. Prepping/Cleaning Data Sets\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# Formatting Wood Thrush\nWood_Thrush <- Wood_Thrush |>\n  select(COUNTRY, `COUNTRY CODE`, STATE, `OBSERVATION COUNT`, `OBSERVATION DATE`, LATITUDE, LONGITUDE) |>\n  mutate(`OBSERVATION DATE` = as.Date(`OBSERVATION DATE`, format = \"%m/%d/%Y\"),\n         Year = year(`OBSERVATION DATE`))\n\n# Formatting Weather\nAnnual_Weather <- AllWeatherData |>\n  select(Year, Annual, STATE)\n\n# Formatting CO2\nAnnua_CO2_Emissions <- Annua_CO2_Emissions |>\n  select(Year, `Annual CO₂ emissions`)\n\n# Joined Data\nMain_Data <- Wood_Thrush |>\n  inner_join(Annual_Weather, by = c(\"Year\", \"STATE\")) |>\n  inner_join(Annua_CO2_Emissions, by = \"Year\") |>\n  mutate(DayOfYear = yday(`OBSERVATION DATE`)) |>\n  drop_na(Annual, `Annual CO₂ emissions`, DayOfYear)\n\n# Creating Springtime Dataset\nSpring_Arrival <- Main_Data |>\n  group_by(year(`OBSERVATION DATE`)) |>\n  slice_min(`OBSERVATION DATE`, with_ties = FALSE)\n\n# Creating Falltime Dataset\nFall_Departure <- Main_Data |>\n  group_by(year(`OBSERVATION DATE`)) |>\n  slice_max(`OBSERVATION DATE`, with_ties = FALSE)\n```\n:::\n\n\n\n\n\n### III. Creating Linear Model for Observation Dates\n\n#### Temperature Models -\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# Temperature Model - Spring\nTemp_S_Main_Model <- lm(formula = DayOfYear ~ Annual, data = Spring_Arrival)\n\nsummary(Temp_S_Main_Model)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = DayOfYear ~ Annual, data = Spring_Arrival)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-86.777  -1.755   5.228   9.191  21.902 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)\n(Intercept)  35.7705    36.6956   0.975    0.334\nAnnual        0.9964     0.6456   1.543    0.129\n\nResidual standard error: 20.59 on 52 degrees of freedom\nMultiple R-squared:  0.0438,\tAdjusted R-squared:  0.02541 \nF-statistic: 2.382 on 1 and 52 DF,  p-value: 0.1288\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nspringp1 <- ggplot(Spring_Arrival, aes(x = Annual, y = DayOfYear)) +\n  geom_point(color = \"#87CEFA\", alpha = 0.6) +  \n  geom_smooth(method = \"lm\", color = \"#9BCD9B\", se = TRUE) +  \n  labs(\n    title = \"Effect of Annual Temperature on\\nSpring Arrival Date\",\n    x = \"Annual Average Temperature (°C)\",  \n    y = \"Day of Year of Spring Arrival\"\n  ) +\n  theme_minimal()\n\n# Temperature Model - Spring\nTemp_F_Main_Model <- lm(formula = DayOfYear ~ Annual, data = Fall_Departure)\n\nsummary(Temp_F_Main_Model)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = DayOfYear ~ Annual, data = Fall_Departure)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-34.127 -18.496  -7.249   9.039  57.588 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept) 392.1490    47.0361   8.337 3.75e-11 ***\nAnnual       -1.5966     0.8621  -1.852   0.0697 .  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 24.59 on 52 degrees of freedom\nMultiple R-squared:  0.06188,\tAdjusted R-squared:  0.04384 \nF-statistic:  3.43 on 1 and 52 DF,  p-value: 0.06971\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nfallp1 <- ggplot(Fall_Departure, aes(x = Annual, y = DayOfYear)) +\n  geom_point(color = \"palevioletred1\", alpha = 0.6) +  \n  geom_smooth(method = \"lm\", color = \"#FF7256\", se = TRUE) +  \n  labs(\n    title = \"Effect of Annual Temperature on\\nFall Departure Date\",\n    x = \"Annual Average Temperature (°C)\",  \n    y = \"Day of Year of Fall Depature (Last Observation)\"\n  ) +\n  theme_minimal()\n\n# Combine plots side by side\n\nlibrary(patchwork)\n\ncombined_plot <- springp1 + fallp1\n\nprint(combined_plot)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n\n\n#### CO2 Models -\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nlibrary(patchwork)\n# CO2 Model - Spring\nCO2_S_Main_Model <- lm(formula = DayOfYear ~ `Annual CO₂ emissions`, data = Spring_Arrival)\n\nsummary(CO2_S_Main_Model)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = DayOfYear ~ `Annual CO₂ emissions`, data = Spring_Arrival)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-90.777   1.588   4.938   9.630  13.831 \n\nCoefficients:\n                         Estimate Std. Error t value Pr(>|t|)    \n(Intercept)             1.023e+02  2.019e+01   5.066 5.46e-06 ***\n`Annual CO₂ emissions` -1.660e-09  3.302e-09  -0.503    0.617    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 21.01 on 52 degrees of freedom\nMultiple R-squared:  0.004839,\tAdjusted R-squared:  -0.0143 \nF-statistic: 0.2529 on 1 and 52 DF,  p-value: 0.6172\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nspringp2 <- ggplot(Spring_Arrival, aes(x = `Annual CO₂ emissions`, y = DayOfYear)) +\n  geom_point(color = \"#FFBBFF\", alpha = 0.6) +  \n  geom_smooth(method = \"lm\", color = \"palevioletred2\", se = TRUE) +  \n  labs(\n    title = \"Effect of Annual CO2 Emissions on\\npring Arrival Date\",\n    x = \"Annual CO2 Emissions (ppm)\", \n    y = \"Day of Year of Spring Arrival\"\n  ) +\n  theme_minimal()\n\n# CO2 Model - Fall\nCO2_F_Main_Model <- lm(formula = DayOfYear ~ `Annual CO₂ emissions`, data = Fall_Departure)\n\nsummary(CO2_F_Main_Model)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = DayOfYear ~ `Annual CO₂ emissions`, data = Fall_Departure)\n\nResiduals:\n   Min     1Q Median     3Q    Max \n-27.19 -17.02 -12.16  10.40  63.22 \n\nCoefficients:\n                        Estimate Std. Error t value Pr(>|t|)    \n(Intercept)            2.912e+02  2.432e+01  11.974   <2e-16 ***\n`Annual CO₂ emissions` 2.323e-09  3.977e-09   0.584    0.562    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 25.3 on 52 degrees of freedom\nMultiple R-squared:  0.006521,\tAdjusted R-squared:  -0.01258 \nF-statistic: 0.3413 on 1 and 52 DF,  p-value: 0.5616\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nfallp2 <- ggplot(Fall_Departure, aes(x = `Annual CO₂ emissions`, y = DayOfYear)) +\n  geom_point(color = \"tomato2\", alpha = 0.6) +  # Scatter points\n  geom_smooth(method = \"lm\", color = \"#EE7942\", se = TRUE) +  # Regression line with confidence interval\n  labs(\n    title = \"Effect of Annual CO2 Emissions on\\nFall Departure Date\",\n    x = \"Annual CO2 Emissions (ppm)\",  # Adjust units if needed\n    y = \"Day of Year of Fall Departure\"\n  ) +\n  theme_minimal()\n\ncombined_plot2 <- springp2 + fallp2\n\nprint(combined_plot2)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n\n\n## Part 4. Main Analysis - Machine Learning Model\n\n### I. Splitting and CV folds\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nset.seed(123)\nWT_split <- initial_split(Main_Data, prop = 0.8)\nWT_train <- training(WT_split)\nWT_test  <- testing(WT_split)\nWT_cv <- vfold_cv(WT_train, v = 5)\n```\n:::\n\n\n\n\n\n### II. Recipes\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# CO2 Recipe \nCO2_rec <- recipe(formula = DayOfYear ~ `Annual CO₂ emissions`, data = WT_train) |>\n  step_log(all_predictors()) |>\n  step_naomit(all_predictors(), all_outcomes())\n\n# Temperature Recipe\nTemp_rec <- recipe(formula = DayOfYear ~ Annual, data = WT_train) |>\n  step_log(all_predictors(), offset = 1) |>\n  step_naomit(all_predictors(), all_outcomes())\n```\n:::\n\n\n\n\n\n### III. Define Models\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nlm_model <- linear_reg() |> set_engine(\"lm\") |> set_mode(\"regression\")\nrf_model <- rand_forest(trees = 100) |> set_engine(\"ranger\") |> set_mode(\"regression\")\nxg_model <- boost_tree() |> set_engine(\"xgboost\") |> set_mode(\"regression\")\n```\n:::\n\n\n\n\n\n### IV. Workflows\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# CO2 Workflows\nwf_lm_CO2 <- workflow() |>\n  add_model(lm_model) |>\n  add_recipe(CO2_rec)\n\nwf_rf_CO2 <- workflow() |>\n  add_model(rf_model) |>\n  add_recipe(CO2_rec)\n\nwf_xg_CO2 <- workflow() |>\n  add_model(xg_model) |>\n  add_recipe(CO2_rec)\n\n# Temperature Workflows\nwf_lm_Temp <- workflow() |>\n  add_model(lm_model) |>\n  add_recipe(Temp_rec)\n\nwf_rf_Temp <- workflow() |>\n  add_model(rf_model) |>\n  add_recipe(Temp_rec)\n\nwf_xg_Temp <- workflow() |>\n  add_model(xg_model) |>\n  add_recipe(Temp_rec)\n```\n:::\n\n\n\n\n\n### V.a CO2 - Fitting Models\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# Linear - CO2\nres_lm_CO2 <- fit_resamples(\n  wf_lm_CO2,\n  resamples = WT_cv,\n  metrics = metric_set(rmse, rsq),\n  control = control_resamples(save_pred = TRUE)\n)\n\n# Random Forest - CO2\nres_rf_CO2 <- fit_resamples(\n  wf_rf_CO2,\n  resamples = WT_cv,\n  metrics = metric_set(rmse, rsq),\n  control = control_resamples(save_pred = TRUE)\n)\n\n# XG Boosted Tree - CO2\nres_xg_CO2 <- fit_resamples(\n  wf_xg_CO2,\n  resamples = WT_cv,\n  metrics = metric_set(rmse, rsq),\n  control = control_resamples(save_pred = TRUE)\n)\n```\n:::\n\n\n\n\n\n### V.b Temperature - Fitting Models\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# Linear - Temperature \nres_lm_Temp <- fit_resamples(\n  wf_lm_Temp,\n  resamples = WT_cv,\n  metrics = metric_set(rmse, rsq),\n  control = control_resamples(save_pred = TRUE)\n)\n\n# Random Forest - Temperature\nres_rf_Temp <- fit_resamples(\n  wf_rf_Temp,\n  resamples = WT_cv,\n  metrics = metric_set(rmse, rsq),\n  control = control_resamples(save_pred = TRUE)\n)\n\n# XG Boosted Tree - Temperature\nres_xg_Temp <- fit_resamples(\n  wf_xg_Temp,\n  resamples = WT_cv,\n  metrics = metric_set(rmse, rsq),\n  control = control_resamples(save_pred = TRUE)\n)\n```\n:::\n\n\n\n\n\n### VI. Metrics and Comparison\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nall_results <- bind_rows(\n  collect_metrics(res_lm_CO2) |> mutate(Model = \"LM - CO2\"),\n  collect_metrics(res_rf_CO2) |> mutate(Model = \"RF - CO2\"),\n  collect_metrics(res_xg_CO2) |> mutate(Model = \"XG - CO2\"),\n  collect_metrics(res_lm_Temp) |> mutate(Model = \"LM - Temp\"),\n  collect_metrics(res_rf_Temp) |> mutate(Model = \"RF - Temp\"),\n  collect_metrics(res_xg_Temp) |> mutate(Model = \"XG - Temp\")\n)\n\nall_results |>\n  filter(.metric == \"rsq\") |>\n  ggplot(aes(x = reorder(Model, mean), y = mean, fill = Model)) +\n  geom_col(show.legend = FALSE) +\n  labs(\n    title = \"RSQ Comparison Across Models\",\n    x = \"Model\",\n    y = \"RSQ\"\n  ) +\n  coord_flip() +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n\n\n\n## Part 5. Full Analysis - Spring Arrival and Fall Departure Random Forest Predictions\n\n### I. Fit to Full Model (Spring and Fall \\| CO2 and Temperature)\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# Temperature Models\nrf_temp_spring_fit <- fit(wf_rf_Temp, data = Spring_Arrival)\n\nrf_temp_fall_fit <- fit(wf_rf_Temp, data = Fall_Departure)\n\n# CO2 Models\nrf_CO2_spring_fit <- fit(wf_rf_CO2, data = Spring_Arrival)\n\nrf_CO2_fall_fit <- fit(wf_rf_CO2, data = Fall_Departure)\n```\n:::\n\n\n\n\n\n### II. Predictions for Models\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# Temperature Models\ntemp_spring_preds <- predict(rf_temp_spring_fit, Spring_Arrival) |>\n  bind_cols(Spring_Arrival)\n\ntemp_fall_preds <- predict(rf_temp_fall_fit, Fall_Departure) |>\n  bind_cols(Fall_Departure)\n\n# CO2 Models\nCO2_spring_preds <- predict(rf_CO2_spring_fit, Spring_Arrival) |>\n  bind_cols(Spring_Arrival)\n\nCO2_fall_preds <- predict(rf_CO2_fall_fit, Fall_Departure) |>\n  bind_cols(Fall_Departure)\n```\n:::\n\n\n\n\n\n### III. Plotting Temperature Prediction Models\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nlibrary(patchwork) \n\n# Spring Arrival\np1 <- ggplot(temp_spring_preds, aes(x = .pred, y = DayOfYear)) +\n  geom_point(alpha = 0.9, color = \"#A2CD5A\") +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"black\", linetype = \"dashed\") +\n  theme_minimal() +\n  labs(title = \"Spring Arrival - Temperature Predictor:\\nPredicted vs Actual Day\\nof Year Observation\",\n       x = \"Predicted DOY\", y = \"Actual DOY\")\n\n# Fall Departure\np2 <- ggplot(temp_fall_preds, aes(x = .pred, y = DayOfYear)) +\n  geom_point(alpha = 0.9, color = \"darkorange2\") +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"black\", linetype = \"dashed\") +\n  theme_minimal() +\n  labs(title = \"Fall Departure - Temperature\\nPredictor: Predicted vs Actual Day\\nof Year Observation\",\n       x = \"Predicted DOY\", y = \"Actual DOY\")\n\n\np1 + p2\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n\n\n\n### IV. Plotting CO2 Prediction Models\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# Spring Arrival\np3 <- ggplot(CO2_spring_preds, aes(x = .pred, y = DayOfYear)) +\n  geom_point(alpha = 0.9, color = \"pink1\") +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"black\", linetype = \"dashed\") +\n  theme_minimal() +\n  labs(title = \"Spring Arrival - CO2 Predictor:\\nPredicted vs Actual Day\\nof Year Observation\",\n       x = \"Predicted DOY\", y = \"Actual DOY\")\n\n# Fall Departure\np4 <- ggplot(CO2_fall_preds, aes(x = .pred, y = DayOfYear)) +\n  geom_point(alpha = 0.9, color = \"sienna2\") +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"black\", linetype = \"dashed\") +\n  theme_minimal() +\n  labs(title = \"Fall Departure - CO2 Predictor:\\nPredicted vs Actual Day\\nof Year Observation\",\n       x = \"Predicted DOY\", y = \"Actual DOY\")\n\n\np3 + p4\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n\n\n\n## **Part 6. Results Discussion**\n\nTo assess the relationship between climate variables and Wood Thrush migration phenology, we implemented and evaluated six machine learning models: linear regression, random forest, and XGBoost—each applied separately to CO₂ and temperature predictor datasets. Performance was measured using 5-fold cross-validation due to the size of the datasets and runtime constraints. With this we had 4 total final datasets, separated by Spring/Fall and Temperature/CO₂.\n\nThe **random forest model with temperature** as the predictor emerged as the strongest model across both spring arrival and fall departure dates, showing the **lowest RMSE** and **highest R² values**, indicating superior predictive performance and robustness.\n\n### **I. Spring Arrival Predictions**\n\n#### Temperature Models -\n\nThe Temperature Spring model's predictions showed a **tight clustering along the 1:1 line**, especially near the top-right of the plot. This indicates that as temperatures have risen, **Wood Thrushes are arriving later than expected**. This mismatch in timing may suggest a lag in response to changing environmental cues or a disruption in optimal conditions for early arrival.\n\nThe higher accuracy in spring predictions may be because spring arrival is tightly regulated by temperature-dependent cues (such as snow melt, insect emergence, or vegetation growth), making it more sensitive to annual temperature changes.\n\n#### CO₂ Models -\n\nCO₂'s Spring model had similar results, with a clustering of points in the top right hand corner and fairly close to the actual dates. This is sensible with how CO₂ comes as a direct impact onto temperature and can provide data that states that as they move in similar directions, they both have impacts on migration periods and dates.\n\nThe accuracy is reliable, however, when compared to the temperature model, they have differences in how many points are along this line or close to. In conclusion for spring arrival, CO₂ and temperature have a higher reliability to help predict dates with temperature being more accurate.\n\n### **II. Fall Departure Predictions**\n\n#### Temperature Models -\n\nFall departure predictions demonstrated more **scatter and variability** compared to spring arrival. While the random forest model still performed best, the weaker R² values suggest that **fall migration timing is less directly tied to temperature or CO₂ alone**. The wider spread of points around the 1:1 line, particularly in the lower-left region, implies that **birds are departing earlier than expected** in many cases.\n\nThis might indicate that other variables—such as food availability, photoperiod (day length), or precipitation patterns—play a larger role in influencing fall departure behavior.\n\n#### CO₂ Models -\n\nWhile temperature-based models consistently outperformed CO₂-based models, the **patterns in both sets of predictions were similar**, suggesting that CO₂ indirectly influences migration phenology through its effect on global temperatures.\n\nVisualizations comparing CO₂ and temperature models showed nearly **parallel trends**, with later spring arrivals and earlier fall departures becoming more common over time—consistent with broader ecological impacts of climate change.\n\n### III. Overall Analysis Conclusion\n\nFrom our multiple model simulations, we concluded that temperature has the bigger impact directly on migration dates. While CO₂ did have similar results to temperature, it had much more variability and less accuracy. This may be because of CO₂ potentially being an indirect impact on migration patterns, but can help to predict these dates when added to temperature models.\n\n**Future studies** could include more sophisticated models on computers that can run more in-depth and larger datasets. Along with more skill knowledge of RStudio and how to better create models that both predict and demonstrate correlation between predictor and response variables.\n\n**Some limitations** that we encountered throughout this project was mostly through data analysis and cleaning. Our climate data was particular to how it was supposed to be cleaned and took many hours of excel refining to be usable in RStudio. Another major roadblock that we encountered and was a large portion of our challenges was the rendering of our files to be able to display them as a website through Github pages. With multiple meetings dedicated to resolving this issue, we still faced many errors with long rendering periods, models taking hours to process, and seemingly endless errors. However, we preserved through it all to create a simple yet replicable method to help understand the correlation between temperature, CO₂, and migration dates.\n\n**The significance of this study** relates back to our original problem that inspired our target. Avian species are one of the longest standing species groups, dating back to before records existed. With their adaptable and resilient nature, they are ideal for studies regarding changes to key factors that can drastically harm their populations. Our goal with this study was to begin a coding process that can be replicated and used across multiple species of different conservation statuses. While this report may need more refining and different methods to achieve a successful and accurate depiction of the impact on these variables, it begins the discussion of how humans are not the only species to be impacted by CO₂ emissions and temperature variance.\n\n**Our take away** from this is that even as junior data analysts, we can create studies that can be built upon and developed to create solutions or incentives for policy management of wildlife and emissions. We hoped to contribute to the wider ecological research surrounding conservation of native and important species.\n\n### **IV. Visual Summary**\n\nWe generated the following visualizations to illustrate key trends:\n\n-   **Figure 1**: Spring Arrival vs. Annual Temperature\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nprint(p1)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\n\n\n\n-   **Figure 2**: Fall Departure vs. Annual Temperature\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nprint(p2)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\n\n\n\n-   **Figure 3**: Spring Arrival vs. Annual CO₂\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nprint(p3)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\n\n\n\n-   **Figure 4**: Fall Departure vs. Annual CO₂\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nprint(p4)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\n\n\n\nEach figure includes:\n\n-   A 1:1 reference line for perfect prediction\n\n-   Color scaling by year or observation density (if used)\n\n-   Interpretation notes on clustering trends\n\nThese visualizations confirm that the **relationship between climate variables and migration phenology is strong**, particularly for temperature and spring migration events.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}